CREATE OR REPLACE VIEW dv_vault_dietician_w_terminology FOLDER = '/com/davita/vault/dieticians/derived views' AS SELECT DISTINCT dv_vault_dietician.username AS username, dv_vault_dietician.first_name AS first_name, dv_vault_dietician.last_name AS last_name, dv_vault_dietician.middle_name AS middle_name, dv_vault_dietician.davita_id AS davita_id, dv_vault_dietician.business_entity AS business_entity, dv_vault_dietician.role_name AS role_name, dv_vault_dietician.role_flags AS role_flags, dv_vault_dietician.is_primary_role AS is_primary_role, dv_vault_dietician.role_date_start AS role_date_start, dv_vault_dietician.role_date_stop AS role_date_stop, dv_vault_dietician.job_title AS job_title, dv_vault_dietician.job_code AS job_code, dv_vault_dietician.license_desccription AS license_desccription, dv_vault_dietician.license_number AS license_number, dv_vault_dietician.license_state AS license_state, dv_vault_dietician.license_issued_by AS license_issued_by, dv_vault_dietician.license_issue_date AS license_issue_date, dv_vault_dietician.license_expire_date AS license_expire_date, dv_vault_dietician.uuid AS uuid, dv_vault_dietician.stateoid AS stateoid, dv_terminology_service_getlist_src.oid AS oid, dv_terminology_service_getlist_src.messagetype AS messagetype, dv_terminology_service_getlist_src.code_dateend AS code_dateend, dv_terminology_service_getlist_src.code_termshort AS code_termshort, dv_terminology_service_getlist_src.code_datestart AS code_datestart, dv_terminology_service_getlist_src.code_hits_hits_oid AS code_hits_hits_oid, dv_terminology_service_getlist_src.code_termlong AS code_termlong, dv_terminology_service_getlist_src.code_conceptid AS code_conceptid, dv_terminology_service_getlist_src.mapped_dateend AS mapped_dateend, dv_terminology_service_getlist_src.mapped_termshort AS state_mapped_termshort, dv_terminology_service_getlist_src.mapped_datestart AS mapped_datestart, dv_terminology_service_getlist_src.mapped_hits_hits_oid AS state_mapped_hits_hits_oid, dv_terminology_service_getlist_src.mapped_termlong AS state_mapped_termlong, dv_terminology_service_getlist_src.mapped_conceptid AS state_mapped_conceptid, nest(dv_vault_dietician.clinic_name, dv_vault_dietician.clinic_state, dv_vault_dietician.clinic_id, dv_vault_dietician.facility_id, dv_vault_dietician.clinic_date_start, dv_vault_dietician.clinic_date_stop, dv_vault_dietician.is_primary_clinic, dv_vault_dietician.facilityid_uuid, dv_vault_dietician.dietfac_uuid) AS facilities FROM dv_vault_dietician AS dv_vault_dietician LEFT OUTER JOIN dv_terminology_service_getlist_src AS dv_terminology_service_getlist_src ON (dv_vault_dietician.stateoid = dv_terminology_service_getlist_src.code_hits_hits_oid AND dv_vault_dietician.license_state = dv_terminology_service_getlist_src.code_termshort)  GROUP BY dv_vault_dietician.username, dv_vault_dietician.first_name, dv_vault_dietician.last_name, dv_vault_dietician.middle_name, dv_vault_dietician.davita_id, dv_vault_dietician.business_entity, dv_vault_dietician.role_name, dv_vault_dietician.role_flags, dv_vault_dietician.is_primary_role, dv_vault_dietician.role_date_start, dv_vault_dietician.role_date_stop, dv_vault_dietician.job_title, dv_vault_dietician.job_code, dv_vault_dietician.license_desccription, dv_vault_dietician.license_number, dv_vault_dietician.license_state, dv_vault_dietician.license_issued_by, dv_vault_dietician.license_issue_date, dv_vault_dietician.license_expire_date, dv_vault_dietician.uuid, dv_vault_dietician.stateoid, dv_terminology_service_getlist_src.oid, dv_terminology_service_getlist_src.messagetype, dv_terminology_service_getlist_src.code_dateend, dv_terminology_service_getlist_src.code_termshort, dv_terminology_service_getlist_src.code_datestart, dv_terminology_service_getlist_src.code_hits_hits_oid, dv_terminology_service_getlist_src.code_termlong, dv_terminology_service_getlist_src.code_conceptid, dv_terminology_service_getlist_src.mapped_dateend, dv_terminology_service_getlist_src.mapped_termshort, dv_terminology_service_getlist_src.mapped_datestart, dv_terminology_service_getlist_src.mapped_hits_hits_oid, dv_terminology_service_getlist_src.mapped_termlong, dv_terminology_service_getlist_src.mapped_conceptid;

ALTER VIEW dv_vault_dietician_w_terminology
 LAYOUT (dv_vault_dietician = [272, 204, 200, 225], dv_terminology_service_getlist_src = [665, 327, 200, 225]);

